"use strict";const showResults=document.querySelector(".js_results"),button=document.querySelector(".js_button"),valueInputd100=document.querySelector("#inputd100"),valueInputd20=document.querySelector("#inputd20"),valueInputd12=document.querySelector("#inputd12"),valueInputd10=document.querySelector("#inputd10"),valueInputd8=document.querySelector("#inputd8"),valueInputd6=document.querySelector("#inputd6"),valueInputd4=document.querySelector("#inputd4");function getRandomNumber(e){return Math.ceil(Math.random()*e)}function handleRoll(e,t){let l=[];for(let a=0;a<e;a++)l.push(getRandomNumber(t));return l}function handleRolld100(){if("0"!==valueInputd100.value){const e=handleRoll(valueInputd100.value,100);let t=document.createElement("p"),l=0;for(const a of e)l+=parseInt(a),t.innerHTML=`Tiraste ${valueInputd100.value} dados d100, los resultados son ${e} El total es ${l} `;showResults.appendChild(t)}}function handleRolld20(){if("0"!==valueInputd20.value){const e=handleRoll(valueInputd20.value,20);let t=document.createElement("p"),l=0;for(const a of e)l+=parseInt(a),t.innerHTML=`Tiraste ${valueInputd20.value} dados d20, los resultados son ${e} El total es ${l} `;showResults.appendChild(t)}}function handleRolld12(){if("0"!==valueInputd12.value){const e=handleRoll(valueInputd12.value,12);let t=document.createElement("p"),l=0;for(const a of e)l+=parseInt(a),t.innerHTML=`Tiraste ${valueInputd12.value} dados d12, los resultados son ${e} El total es ${l} `;showResults.appendChild(t)}}function handleRolld10(){if("0"!==valueInputd10.value){const e=handleRoll(valueInputd10.value,10);let t=document.createElement("p"),l=0;for(const a of e)l+=parseInt(a),t.innerHTML=`Tiraste ${valueInputd10.value} dados d10, los resultados son ${e} El total es ${l} `;showResults.appendChild(t)}}function handleRolld8(){if("0"!==valueInputd8.value){const e=handleRoll(valueInputd8.value,8);let t=document.createElement("p"),l=0;for(const a of e)l+=parseInt(a),t.innerHTML=`Tiraste ${valueInputd8.value} dados d8, los resultados son ${e} El total es ${l} `;showResults.appendChild(t)}}function handleRolld6(){if("0"!==valueInputd6.value){const e=handleRoll(valueInputd6.value,6);let t=document.createElement("p"),l=0;for(let a=0;a<e.length;a++)l+=parseInt(e[a]),t.innerHTML=`Tiraste ${valueInputd6.value} dados d6, los resultados son ${e} El total es ${l} `;showResults.appendChild(t)}}function handleRolld4(){if("0"!==valueInputd4.value){const e=handleRoll(valueInputd4.value,4);let t=document.createElement("p"),l=0;for(let a=0;a<e.length;a++)l+=parseInt(e[a]),t.innerHTML=`Tiraste ${valueInputd4.value} dados d4, los resultados son ${e} El total es ${l} `;showResults.appendChild(t)}}function renderRoll(e){showResults.innerHTML="",e.preventDefault(),handleRolld100(),handleRolld20(),handleRolld12(),handleRolld10(),handleRolld8(),handleRolld6(),handleRolld4()}button.addEventListener("click",renderRoll);const buttonPlus=document.querySelectorAll(".js_buttonplus"),buttonRest=document.querySelectorAll(".js_buttonrest");for(const e of buttonPlus)e.addEventListener("click",incrementar);for(const e of buttonRest)e.addEventListener("click",decrement);function incrementar(e){e.preventDefault();const t=e.currentTarget.id;"buttonplusd100"===t?valueInputd100.value=parseInt(valueInputd100.value)+1:"buttonplusd20"===t?valueInputd20.value=parseInt(valueInputd20.value)+1:"buttonplusd12"===t?valueInputd12.value=parseInt(valueInputd12.value)+1:"buttonplusd10"===t?valueInputd10.value=parseInt(valueInputd10.value)+1:"buttonplusd8"===t?valueInputd8.value=parseInt(valueInputd8.value)+1:"buttonplusd6"===t?valueInputd6.value=parseInt(valueInputd6.value)+1:valueInputd4.value=parseInt(valueInputd4.value)+1}function decrement(e){e.preventDefault();const t=e.currentTarget.id;"buttonrestd100"===t&&parseInt(valueInputd100.value)>0?valueInputd100.value=parseInt(valueInputd100.value)-1:"buttonrestd20"===t&&parseInt(valueInputd20.value)>0?valueInputd20.value=parseInt(valueInputd20.value)-1:"buttonrestd12"===t&&parseInt(valueInputd12.value)>0?valueInputd12.value=parseInt(valueInputd12.value)-1:"buttonrestd10"===t&&parseInt(valueInputd10.value)>0?valueInputd10.value=parseInt(valueInputd10.value)-1:"buttonrestd8"===t&&parseInt(valueInputd8.value)>0?valueInputd8.value=parseInt(valueInputd8.value)-1:"buttonrestd6"===t&&parseInt(valueInputd6.value)>0?valueInputd6.value=parseInt(valueInputd6.value)-1:"buttonrestd4"===t&&parseInt(valueInputd4.value)>0&&(valueInputd4.value=parseInt(valueInputd4.value)-1)}const save=document.querySelector(".js_save"),buttonSave=document.querySelector(".js_buttonSave");let selects=[];const inputsSave=document.querySelectorAll(".js_inputsave"),nameSave=document.querySelector(".js_nameSave"),buttonPlusSavedp=document.querySelectorAll(".jsbuttonplusSaved"),buttonSavePrint=document.querySelector(".js_savebutton");function paintFavorites(e){console.log("Este es arrayFavorites",e);for(let t of e){let e=document.createElement("div");e.classList.add("savedRoll__favorite--div");let l=document.createElement("ul");l.classList.add("savedRoll__favorite--ul");let a=document.createElement("h3");a.classList.add("savedRoll__favorite--title");let n=document.createElement("button");n.classList.add("js_buttonfavorite"),n.classList.add("savedRoll__favorite--button"),n.setAttribute("id",t.name[0]),e.setAttribute("id","div_"+t.name[0]),n.innerHTML="Roll";for(const e of t.dices){const n=t.name[0];a.innerHTML=n,a.innerHTML+=`<i class="fas fa-times-circle js_deleted lifavorite__deleted" data-id="${t.name[0]}">`,""!==t.values&&(l.innerHTML+=`<li><label for="">\n                   <i class="fas fa-dice-d20 js_liDice"></i>\n                   <input\n                     class=${e.class}\n                     type="number"\n                     name=${t.name[0]}\n                     value=${parseInt(e.value)}\n                   />\n                   \n                 </label></li>`)}favoritesSave.appendChild(e),e.appendChild(a),e.appendChild(l),e.appendChild(n),selects=[]}listenRoll(),listenCloses(),handleSelectSave()}function listenRoll(){const e=document.querySelectorAll(".js_buttonfavorite");for(let t of e)t.addEventListener("click",renderRollSave)}for(const e of inputsSave)e.addEventListener("change",handleInputChange);function handleInputChange(e){console.log(nameSave.value),console.log(e.currentTarget.value),selects.push({name:nameSave.value,id:e.currentTarget.id,value:e.currentTarget.value})}let roll;function onSave(){roll={name:selects.map(e=>e.name),id:selects[0].name,dices:[]},selects.forEach(e=>{const t={class:e.id,value:e.value};0!==t.value&&void 0!==t.value&&roll.dices.push(t)}),console.log("Esto es select name",selects[0].name),console.log("Esto es roll",roll),setInLocalStorage(roll),paintFavorites([roll])}function handleSelectSave(){save.classList.toggle("hidden"),nameSave.value="",document.querySelector(".js_inputsaved100").value=0,document.querySelector("#js_inputsaved20").value=0,document.querySelector("#js_inputsaved12").value=0,document.querySelector("#js_inputsaved10").value=0,document.querySelector("#js_inputsaved8").value=0,document.querySelector("#js_inputsaved6").value=0,document.querySelector("#js_inputsaved4").value=0}buttonSave.addEventListener("click",handleSelectSave),buttonSavePrint.addEventListener("click",onSave);const favoritesSave=document.querySelector(".js_favoritesdice"),savedRoll=document.querySelector(".savedRollSection");function handleRolld100Save(e){const t=document.querySelectorAll(".js_inputsaved100");let l=document.createElement("p");for(const a of t)if("0"!==a.value&&e.currentTarget.id===a.name){const e=handleRoll(a.value,100);let t=0;for(const n of e)t+=parseInt(n),l.innerHTML=`Tiraste ${a.value} dados d100, los resultados son ${e} El total es ${t} `}savedRoll.appendChild(l)}function handleRolld20Save(e){const t=document.querySelectorAll(".js_inputsaved20");let l=document.createElement("p");for(const a of t)if("0"!==a.value&&e.currentTarget.id===a.name){const e=handleRoll(a.value,20);let t=0;for(const n of e)t+=parseInt(n),l.innerHTML=`Tiraste ${a.value} dados d20, los resultados son ${e} El total es ${t} `}savedRoll.appendChild(l)}function handleRolld12Save(e){const t=document.querySelectorAll(".js_inputsaved12");for(const l of t)if("0"!==l.value&&e.currentTarget.id===l.name){const e=handleRoll(l.value,12);let t=document.createElement("p"),a=0;for(const n of e)a+=parseInt(n),t.innerHTML=`Tiraste ${l.value} dados d12, los resultados son ${e} El total es ${a} `;savedRoll.appendChild(t)}}function handleRolld10Save(e){const t=document.querySelectorAll(".js_inputsaved10");for(const l of t)if("0"!==l.value&&e.currentTarget.id===l.name){const e=handleRoll(l.value,10);let t=document.createElement("p"),a=0;for(const n of e)a+=parseInt(n),t.innerHTML=`Tiraste ${l.value} dados d10, los resultados son ${e} El total es ${a} `;savedRoll.appendChild(t)}}function handleRolld8Save(e){const t=document.querySelectorAll(".js_inputsaved8");for(const l of t)if("0"!==l.value&&e.currentTarget.id===l.name){const e=handleRoll(l.value,8);let t=document.createElement("p"),a=0;for(const n of e)a+=parseInt(n),t.innerHTML=`Tiraste ${l.value} dados d8, los resultados son ${e} El total es ${a} `;savedRoll.appendChild(t)}}function handleRolld6Save(e){const t=document.querySelectorAll(".js_inputsaved6");for(const l of t)if("0"!==l.value&&e.currentTarget.id===l.name){const e=handleRoll(l.value,6);let t=document.createElement("p"),a=0;for(const n of e)a+=parseInt(n),t.innerHTML=`Tiraste ${l.value} dados d6, los resultados son ${e} El total es ${a} `;savedRoll.appendChild(t)}}function handleRolld4Save(e){const t=document.querySelectorAll(".js_inputsaved4");for(const l of t)if("0"!==l.value&&e.currentTarget.id===l.name){const e=handleRoll(l.value,4);let t=document.createElement("p"),a=0;for(const n of e)a+=parseInt(n),t.innerHTML=`Tiraste ${l.value} dados d4, los resultados son ${e} El total es ${a} `;savedRoll.appendChild(t)}}function renderRollSave(e){savedRoll.innerHTML="",handleRolld100Save(e),handleRolld20Save(e),handleRolld12Save(e),handleRolld10Save(e),handleRolld8Save(e),handleRolld6Save(e),handleRolld4Save(e)}const valueInputd100Saved=document.querySelector("#js_inputsaved100"),valueInputd20Saved=document.querySelector("#js_inputsaved20"),valueInputd12Saved=document.querySelector("#js_inputsaved12"),valueInputd10Saved=document.querySelector("#js_inputsaved10"),valueInputd8Saved=document.querySelector("#js_inputsaved8"),valueInputd6Saved=document.querySelector("#js_inputsaved6"),valueInputd4Saved=document.querySelector("#js_inputsaved4"),buttonPlusSaved=document.querySelectorAll(".js_buttonplusSaved"),buttonRestSaved=document.querySelectorAll(".js_buttonrestSaved");for(const e of buttonPlusSaved)e.addEventListener("click",incrementarSaved);for(const e of buttonRestSaved)e.addEventListener("click",decrementSaved);function incrementarSaved(e){e.preventDefault();const t=e.currentTarget.id;"buttonplusd100Saved"===t?valueInputd100Saved.value=parseInt(valueInputd100Saved.value)+1:"buttonplusd20Saved"===t?valueInputd20Saved.value=parseInt(valueInputd20Saved.value)+1:"buttonplusd12Saved"===t?valueInputd12Saved.value=parseInt(valueInputd12Saved.value)+1:"buttonplusd10Saved"===t?valueInputd10Saved.value=parseInt(valueInputd10Saved.value)+1:"buttonplusd8Saved"===t?valueInputd8Saved.value=parseInt(valueInputd8Saved.value)+1:"buttonplusd6Saved"===t?valueInputd6Saved.value=parseInt(valueInputd6Saved.value)+1:valueInputd4Saved.value=parseInt(valueInputd4Saved.value)+1}function decrementSaved(e){e.preventDefault();const t=e.currentTarget.id;"buttonrestd100Saved"===t&&parseInt(valueInputd100Saved.value)>0?valueInputd100Saved.value=parseInt(valueInputd100Saved.value)-1:"buttonrestd20Saved"===t&&parseInt(valueInputd20Saved.value)>0?valueInputd20Saved.value=parseInt(valueInputd20Saved.value)-1:"buttonrestd12Saved"===t&&parseInt(valueInputd12Saved.value)>0?valueInputd12Saved.value=parseInt(valueInputd12Saved.value)-1:"buttonrestd10Saved"===t&&parseInt(valueInputd10Saved.value)>0?valueInputd10Saved.value=parseInt(valueInputd10Saved.value)-1:"buttonrestd8Saved"===t&&parseInt(valueInputd8Saved.value)>0?valueInputd8Saved.value=parseInt(valueInputd8Saved.value)-1:"buttonrestd6Saved"===t&&parseInt(valueInputd6Saved.value)>0?valueInputd6Saved.value=parseInt(valueInputd6Saved.value)-1:"buttonrestd4Saved"===t&&parseInt(valueInputd4Saved.value)>0&&(valueInputd4Saved.value=parseInt(valueInputd4Saved.value)-1)}function handleClose(e){console.log(e.currentTarget.dataset.id);const t=e.currentTarget.dataset.id,l=localStorage.getItem("rollArray"),a=JSON.parse(l),n=a.findIndex(e=>e.id===t);if(console.log(a),console.log(n),-1!==n){a.splice(n,1);const e=JSON.stringify(a);localStorage.setItem("rollArray",e);document.getElementById("div_"+t).remove()}}function listenCloses(){const e=document.querySelectorAll(".js_deleted");for(let t of e)t.addEventListener("click",handleClose)}let rollArray=[];function setInLocalStorage(e){const t=localStorage.getItem("rollArray");if(null!==t){const l=JSON.parse(t);rollArray=[...l,e]}else rollArray=[e];const l=JSON.stringify(rollArray);localStorage.setItem("rollArray",l)}function getLocalStorage(){const e=localStorage.getItem("rollArray");if(null!==e){paintFavorites(JSON.parse(e))}}getLocalStorage();